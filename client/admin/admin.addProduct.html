<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<style>
    .image-upload {
        border: 2px dashed #ccc;
        padding: 20px;
        text-align: center;
        margin: 20px;
        border-radius: 10px;
    }

    .image-preview {
        margin-top: 10px;
    }

    .image-preview img {
        max-width: 100px;
        margin: 5px;
    }
</style>
<script>
    async function checkAdminAccess() {
        const token = localStorage.getItem("token");

        if (!token) {
            // window.location.href = "/index.html";
            return;
        }

        try {
            const response = await fetch(
                "http://localhost:3000/admin/dashboard",
                {
                    method: "GET",
                    headers: {
                        Authorization: `Bearer ${token}`,
                    },
                }
            );

            if (response.status === 403) {
                alert("Access denied. You do not have the required permissions.");
                window.location.href = "/login.html";
            } else if (!response.ok) {
                alert("Error accessing admin dashboard");
            } else {
                const data = await response.json();
                console.log("Admin dashboard data:", data);
            }
        } catch (error) {
            console.error("Error:", error);
        }
    }
</script>

<body>
    <main class="flex">
        <div class="flex h-screen fixed w-16 flex-col justify-between border-e bg-white">
            <div>
                <div class="p-4 inline-flex size-16 items-center justify-center">
                    <img src="../assets/Anumala logo 5mb.png" width="180" alt="" />
                </div>

                <div class="border-t border-gray-100">
                    <div class="px-2">
                      <div class="py-4">
                        <a
                          href="./admin.dashboard.html"
                          class="t group relative flex justify-center rounded  px-2 py-1.5 text-teal-700"
                        >
                        <svg class="size-5 opacity" fill="teal" xmlns="http://www.w3.org/2000/svg" id="Layer_1" data-name="Layer 1" viewBox="0 0 24 24">
                          <path d="M19,1H5C2.239,1,0,3.239,0,6V14c0,2.761,2.239,5,5,5h6v2H7c-.553,0-1,.448-1,1s.447,1,1,1h10c.553,0,1-.448,1-1s-.447-1-1-1h-4v-2h6c2.761,0,5-2.239,5-5V6c0-2.761-2.239-5-5-5ZM6.802,15.359c-1.909-.449-3.404-2.058-3.729-3.992-.469-2.791,1.377-5.249,3.927-5.767v4.485c0,.53,.211,1.039,.586,1.414l3.169,3.169c-1.093,.724-2.482,1.036-3.952,.691Zm5.367-2.105l-2.875-2.875c-.188-.188-.293-.442-.293-.707V5.601c2.282,.463,4,2.48,4,4.899,0,1.019-.308,1.964-.832,2.754Zm7.832,1.746h-3c-.552,0-1-.448-1-1s.448-1,1-1h3c.552,0,1,.448,1,1s-.448,1-1,1Zm0-4h-3c-.552,0-1-.448-1-1s.448-1,1-1h3c.552,0,1,.448,1,1s-.448,1-1,1Zm0-4h-3c-.552,0-1-.448-1-1s.448-1,1-1h3c.552,0,1,.448,1,1s-.448,1-1,1Z"/>
                        </svg>
        
                          <span
                            class="invisible absolute start-full top-1/2 ms-4 -translate-y-1/2 rounded bg-gray-900 px-2 py-1.5 text-xs font-medium text-white group-hover:visible"
                          >
                            General
                          </span>
                        </a>
                      </div>
        
                      <ul class="space-y-1 border-t border-gray-100 pt-4">
                        <li>
                          <a
                            href="/admin/admin.products.html"
                            class="group relative flex justify-center bg-teal-50 rounded px-2 py-1.5 text-gray-500 hover:bg-gray-50 hover:text-gray-700"
                          >
                            <svg
                              xmlns="http://www.w3.org/2000/svg"
                              id="Layer_1"
                              class="size-5 opacity-75"
                              data-name="Layer 1"
                              viewBox="0 0 24 24"
                              fill="teal"
                            >
                              <path
                                d="M8.84,14.354l2.175-3.624L3.013,8.062c-.583-.194-1.224,.042-1.54,.57l-1.159,1.931c-.667,1.112-.133,2.555,1.097,2.965l5.081,1.694c.889,.296,1.865-.065,2.347-.868Zm2.175,9.646V14.617l-.46,.766c-.742,1.236-2.044,1.945-3.415,1.945-.425,0-.856-.067-1.28-.209l-3.845-1.281v1.653c0,2.152,1.377,4.063,3.419,4.743l4.435,1.478c.374,.121,.758,.22,1.146,.287Zm12.72-13.404l-1.157-1.928c-.329-.549-.995-.795-1.602-.593l-7.961,2.654,2.175,3.624c.482,.804,1.458,1.165,2.347,.868l5.118-1.706c1.211-.404,1.737-1.825,1.08-2.92Zm-6.845,6.733c-1.371,0-2.673-.708-3.415-1.945l-.46-.766v9.378c.422-.074,.84-.182,1.236-.314h.01l4.335-1.446c2.042-.681,3.419-2.591,3.419-4.743v-1.654l-3.845,1.282c-.424,.142-.855,.209-1.28,.209Zm2.237-11.096c-.08,.336-.328,.607-.656,.716l-6.077,2.025c-.103,.034-.21,.052-.316,.052s-.214-.017-.316-.052l-3.683-1.256L13.288,2.528c.782-.783,2.05-.782,2.83-.002l2.745,2.77c.244,.246,.343,.6,.263,.937Zm-14.276,.523c-.331-.109-.58-.385-.658-.725s.026-.695,.276-.939L9.094,.577c.77-.772,2.04-.77,2.819,.009l.303,.303c-.126,.099-.256,.19-.371,.305L5.931,7.088l-1.08-.332Z"
                              />
                            </svg>
        
                            <span
                              class="invisible absolute start-full top-1/2 ms-4 -translate-y-1/2 rounded bg-gray-900 px-2 py-1.5 text-xs font-medium text-white group-hover:visible"
                            >
                              Products
                            </span>
                          </a>
                        </li>
        
                        <li>
                          <a
                            href="./admin.orders.html"
                            class="group relative flex justify-center rounded px-2 py-1.5 text-gray-500 hover:bg-gray-50 hover:text-gray-700"
                          >
                          <svg xmlns="http://www.w3.org/2000/svg" class="size-5 opacity-75" fill="teal" id="Layer_1" data-name="Layer 1" viewBox="0 0 24 24">
                            <path d="M9,22c0,1.105-.895,2-2,2s-2-.895-2-2,.895-2,2-2,2,.895,2,2Zm8-2c-1.105,0-2,.895-2,2s.895,2,2,2,2-.895,2-2-.895-2-2-2Zm7-15c0,2.761-2.239,5-5,5s-5-2.239-5-5S16.239,0,19,0s5,2.239,5,5Zm-3,2h0c.39-.39,.39-1.024,0-1.414l-1-1v-1.586c0-.552-.448-1-1-1h0c-.552,0-1,.448-1,1v2c0,.265,.105,.52,.293,.707l1.293,1.293c.39,.39,1.024,.39,1.414,0Zm-2,5.115c-3.86,0-7-3.141-7-7,0-.737,.116-1.447,.329-2.115H5.242l-.041-.352c-.179-1.51-1.46-2.648-2.979-2.648H1C.447,0,0,.448,0,1s.447,1,1,1h1.222c.507,0,.934,.38,.993,.883l1.376,11.702c.297,2.517,2.432,4.416,4.966,4.416h9.443c.553,0,1-.448,1-1s-.447-1-1-1H9.557c-1.292,0-2.404-.826-2.82-2h11.424c2.375,0,4.437-1.69,4.902-4.019l.041-.207c-1.155,.84-2.57,1.341-4.104,1.341Z"/>
                          </svg>
                          
        
                            <span
                              class="invisible absolute start-full top-1/2 ms-4 -translate-y-1/2 rounded bg-gray-900 px-2 py-1.5 text-xs font-medium text-white group-hover:visible"
                            >
                            Orders
                            </span>
                          </a>
                        </li>
        
                        <li>
                          <a
                            href="#"
                            class="group relative flex justify-center rounded px-2 py-1.5 text-gray-500 hover:bg-gray-50 hover:text-gray-700"
                          >
                          <svg class="size-5 opacity-75" fill="teal" xmlns="http://www.w3.org/2000/svg" id="Layer_1" data-name="Layer 1" viewBox="0 0 24 24">
                            <path d="m17.024,8.988l2.26-2.26c-1.692-2.334-4.399-3.728-7.284-3.728C7.038,3,3,7.037,3,12s4.038,9,9,9,9-4.037,9-9h3c0,6.617-5.383,12-12,12S0,18.617,0,12,5.383,0,12,0c3.687,0,7.147,1.715,9.416,4.596l2.584-2.584v5.83c0,.633-.513,1.146-1.146,1.146h-5.83Zm-1.024,1.012v-.5c0-1.58-1.059-2.903-2.5-3.337v-1.163h-3v1.163c-1.441.434-2.5,1.757-2.5,3.337,0,1.528.917,2.883,2.335,3.449l2.216.887c.273.109.449.37.449.664,0,.275-.224.5-.5.5h-1c-.276,0-.5-.225-.5-.5v-.5h-3v.5c0,1.58,1.059,2.903,2.5,3.337v1.163h3v-1.163c1.441-.434,2.5-1.757,2.5-3.337,0-1.528-.917-2.883-2.335-3.449l-2.216-.887c-.273-.109-.449-.37-.449-.664,0-.275.224-.5.5-.5h1c.276,0,.5.225.5.5v.5h3Z"/>
                          </svg>
        
                            <span
                              class="invisible absolute start-full top-1/2 ms-4 -translate-y-1/2 rounded bg-gray-900 px-2 py-1.5 text-xs font-medium text-white group-hover:visible"
                            >
                            Refunds
                            </span>
                          </a>
                        </li>
                        <li>
                          <a
                            href="#"
                            class="group relative flex justify-center rounded px-2 py-1.5 text-gray-500 hover:bg-gray-50 hover:text-gray-700"
                          >
                          <svg fill="teal" class="size-5 opacity-75" xmlns="http://www.w3.org/2000/svg" id="Layer_1" height="512" viewBox="0 0 24 24" width="512" data-name="Layer 1"><path d="m16 .3a4.968 4.968 0 0 1 1.879 1.164l1.656 1.658a4.954 4.954 0 0 1 1.165 1.878h-4.7zm-2 11.7h-4a1 1 0 0 0 0 2h4a1 1 0 0 0 0-2zm2-5a2 2 0 0 1 -2-2v-5h-6a5.006 5.006 0 0 0 -5 5v14a5.006 5.006 0 0 0 5 5h8a5.006 5.006 0 0 0 5-5v-12zm0 13h-8a1 1 0 0 1 0-2h8a1 1 0 0 1 0 2zm-2-4h-4a3 3 0 0 1 0-6h4a3 3 0 0 1 0 6z"/></svg>
        
                            <span
                              class="invisible absolute start-full top-1/2 ms-4 -translate-y-1/2 rounded bg-gray-900 px-2 py-1.5 text-xs font-medium text-white group-hover:visible"
                            >
                            Refunds
                            </span>
                          </a>
                        </li>
        
                        <li>
                          <a
                            href="#"
                            class="group relative flex justify-center rounded px-2 py-1.5 text-gray-500 hover:bg-gray-50 hover:text-gray-700"
                          >
                          <svg class="size-5 opacity-75" fill="teal" xmlns="http://www.w3.org/2000/svg" id="Layer_1" data-name="Layer 1" viewBox="0 0 24 24" width="512" height="512"><path d="M9,12c-3.309,0-6-2.691-6-6S5.691,0,9,0s6,2.691,6,6-2.691,6-6,6Zm4.27,7.48c-.813,.813-1.27,1.915-1.27,3.065v1.455h1.455c1.15,0,2.252-.457,3.065-1.27l6.807-6.807c.897-.897,.897-2.353,0-3.25-.897-.897-2.353-.897-3.25,0l-6.807,6.807Zm-3.27,3.065c0-1.692,.659-3.283,1.855-4.479l2.376-2.376c-1.476-1.06-3.279-1.691-5.231-1.691C4.038,14,0,18.038,0,23c0,.552,.448,1,1,1H10v-1.455Z"/></svg>
        
                            <span
                              class="invisible absolute start-full top-1/2 ms-4 -translate-y-1/2 rounded bg-gray-900 px-2 py-1.5 text-xs font-medium text-white group-hover:visible"
                            >
                              Account
                            </span>
                          </a>
                        </li>
                      </ul>
                    </div>
                  </div>
            </div>

            <div class="sticky inset-x-0 bottom-0 border-t border-gray-100 bg-white p-2">
                <form>
                    <button id="logoutButton" type="submit"
                        class="group relative flex w-full justify-center rounded-lg px-2 py-1.5 text-sm text-gray-500 hover:bg-gray-50 hover:text-gray-700">
                        <svg xmlns="http://www.w3.org/2000/svg" class="size-5 opacity-75" fill="none"
                            viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round"
                                d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1" />
                        </svg>

                        <span
                            class="invisible absolute start-full top-1/2 ms-4 -translate-y-1/2 rounded bg-gray-900 px-2 py-1.5 text-xs font-medium text-white group-hover:visible">
                            Logout
                        </span>
                    </button>
                </form>
            </div>
        </div>
        <div class="w-full ml-[60px]">
            <div class="bg-teal-600 px-4 py-3 text-white sm:flex sm:items-center sm:justify-between sm:px-6 lg:px-8">
                <p class="text-center font-medium sm:text-left">
                    Welcome to your dashboard! <span class="underline" id="user"></span>
                </p>

                <a class="mt-4 block rounded-lg bg-white px-5 py-3 text-center text-sm font-medium text-teal-600 transition hover:bg-white/90 focus:outline-none focus:ring active:text-teal-500 sm:mt-0"
                    href="#">
                    Learn More
                </a>
            </div>
            <form id="add-product" class="m-5">
                <!-- <div class="grid grid-cols-1 gap-4 lg:grid-cols-[310px_1fr] lg:gap-8"> -->
                <div class="grid  grid-cols-1 gap-4 lg:grid-cols-4 lg:gap-8">
                    <div class="rounded-lg lg:col-span-1  border">
                        <header>
                            <h2 class=" m-5 text-xl text-[#071437]">Thumbnail</h2>
                        </header>
                        <div class="relative h-64 m-5 rounded border">
                            <img width="400" id="imageDisplay"
                                class="h-full w-full p-2 cursor-pointer rounded border-dotted"
                                src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAREAAAC4CAMAAADzLiguAAAAPFBMVEX///+rq6unp6fMzMykpKTp6enx8fHU1NS0tLS6urr6+vqwsLDHx8fPz8/w8PD19fXa2trh4eHl5eXAwMAzrysnAAADpklEQVR4nO2c2ZKDIBAAE6KJmsPr//91c69yKKREHav7dctl6YVhGJTdDgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAZqE5LMU1XbrvVupELUe9dO9t5PsFyZfuvY1FjWRL994GRnQeRs5NOj+rNpIVCzSMER2M6GBEByM6GNHBiI4cI+mhbdtLE12SFCO3XKnH36ryJnLDQoxU/xm2usZtWIaRWu1nUyLCSNnfh6moE0eEkYvqK4lavpBgpNA368ktYsMSjKSJbqSK2LAEI7VuRB0iNizBSGUYuURsWIIRc4zEXH8lGDkacSTm6YEEI7tMX2zKiA2LMFL185HAMJJWdcj2UIQRfZCEDJEyT5JkH7BcyzBSnrujJORY9r0BSPzXaxlGHv/pz5TJQoQUn4Mw5T1KhBi5x5LseUadnYJKRlcVPLLEGNkVt7qq0rASWtOZa7nno3KM/EB5/mGF2rSRvLdqe+Z1WzZy0Moq6ujz1IaNNJoQz1CyXSO9IPIeJD5ZyXaN6KXIJx6hZLNGKpuQ/Xl8A7BVI6nNx+MAbPTJjRopjAKCdyjZqJHWOmeeSsay+W0asQcRv1CySSM3t4/7IGmHH96ikW8JwKHkNPj0Fo3o2bvBYCiRayRt84u1a/WYkOHfK9bISam92lvW0qOZvRvzZqgwINXI+5zP0rd8dIgMHxwLNdI4+zYaRF643y6QaaT4nxlaxtXo538O3LJlGmk7fetlXKW9/ybuUCLSSC8l7WZchTt7N5S4QolEI1pK2sm4Tt5C7mPLEUoEGjH3tZ++OUoAjkHiKAwINGIWx86vHxTjmUhPib0wIM+IZV/7DpOhn/bZjyvEGbHOjGffQoLIG1thQJoRV3HsFhZEXqjWolyaEUdKqvLyl89hbYUBYUbcKWlYVP1i7p5lGfFOSb05G9JlGfHZ14ZhZiWijFwnF2IJJZKM1NP7eKCFEkFGLEfbk5D1sxJBRvz3tWFohQE5Rk6etaAflPQKA2KMpJFGyJNuYUCKkdJ1tD0JXfVSjFjfj5mMbigRYmToaHsSJf+FARlGftjXhvJ9j1GEEef7MdOhvu8xijASN4i8lXy+dJNgxPhOLw7vL80FGDnO4uN7FCbAyGx3xb0KA+s3cpntysnkGUpWb6Q8zcjjP7B6I7ODEZ1VGznfjrNzW7WRfbIA6zayFBjRWeWtxhU3X+vUi92Ofoh9CR0AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMA2+AN7/TZH3Ls1kQAAAABJRU5ErkJggg=="
                                alt="Click to upload" />
                            <input type="file" id="imageInput" name="product_img"
                                class="absolute inset-0 h-full w-full opacity-0 cursor-pointer" accept="image/*">
                        </div>
                        <span class="text-sm text-gray-400 line-clamp-3 m-5 text-center ">
                            Set the product thumbnail image. Only *.png, *.jpg and *.jpeg image files are accepted
                        </span>

                    </div>
                    <div class="border rounded-lg lg:col-span-3">
                        <div class="m-5">
                            <header>
                                <h2 class="text-xl">
                                    General
                                </h2>
                            </header>
                            <div class="relative">
                                <label for="UserEmail" class="block text-m mt-4 font-medium text-gray-700"> Product Name
                                    <sup class="text-red-600">*</sup>
                                </label>
                                <input type="text" id="product_name" name="product_name"
                                    class="w-full rounded-lg border border-gray-200 p-4 pe-12 text-sm shadow-sm"
                                    placeholder="Product name" required />
                                <span class="text-xs ml-5 text-gray-400">A product name is required and recommended to
                                    be unique.</span>
                            </div>
                            <div>
                                <label for="product_description" class="block text-m font-medium text-gray-700"> Product
                                    Discription <sup class="text-red-600">*</sup>
                                </label>

                                <textarea id="product_description" name="product_description"
                                    class="w-full rounded-lg border border-gray-200 p-4 pe-12 text-sm shadow-sm"
                                    rows="8" placeholder="Enter any additional order notes..."></textarea>
                                <span class="text-xs ml-5 text-gray-400">Set a description to the product for better
                                    visibility.</span>
                            </div>
                        </div>
                    </div>
                    <div class="border rounded-lg lg:col-span-2">
                        <div class="m-5">
                            <header>
                                <h2 class="text-xl">
                                    Upload media for product
                                </h2>
                            </header>
                            <div class="product_media">
                                <span class="text-gray-500 text-xs">Select Up to 5 Product Images at once</span>
                                <div class="relative">

                                    <input type="file"
                                        class="w-full rounded-lg border border-gray-200 p-4 pe-12 text-sm shadow-sm"
                                        name="product_media" id="product_media" accept="image/*" multiple />
                                </div>
                                <div class="image-preview h-32 flex" id="product_media_display"></div>
                                <span class="text-xs text-gray-400 line-clamp-3 m-5 text-center ">
                                    Set the product media images. Only *.png, *.jpg and *.jpeg image files are accepted
                                </span>
                            </div>
                        </div>
                    </div>
                    <div class="border rounded-lg lg:col-span-2">
                        <div class="m-5">

                            <header>
                                <h2 class="text-xl">
                                    Add custom product quantity/price
                                </h2>
                            </header>
                            <div class="">
                                <div class=" mt-4 flex items-center justify-center gap-4">
                                   <div>
                                    <label for="custom_product_qty">Product Quantity</label>
                                    <input type="number" id="custom_product_qty" name="custom_product_qty"
                                        class="w-full rounded-lg border border-gray-200 p-4 pe-12 text-sm shadow-sm"
                                        placeholder="Enter quantity" />
                                   </div>
                                   <div>
                                    <label for="custom_product_price">Product Price</label>
                                    <input type="number" id="custom_product_price" name="custom_product_price"
                                        class="w-full rounded-lg border border-gray-200 p-4 pe-12 text-sm shadow-sm"
                                        placeholder="Enter price" />
                                   </div>
                                </div>
                                <div id="custom_more"></div>
                                <div class="flex items-center justify-center mt-4" onclick="addMore()">
                                    <button type="button"  class="bg-teal-600 cursor-pointer text-white px-4 py-2 mx-auto rounded-md"
                                        id="add_custom_product_btn">Add More Custom Product</button>
                                </div>
                            </div>
                        </div>

                    </div>

                </div>
                <div class="grid mt-5 grid-cols-1 gap-4 lg:grid-cols-4 lg:gap-8">
                    <div class="rounded-lg  lg:col-span-1">
                        <div>
                            <div class="border rounded-lg p-5">
                                <div class="flex items-center justify-between m-4">
                                    <label for="product_status" class="block text-m font-medium text-gray-900"> Product
                                        Status
                                    </label>
                                    <div class="rounded-full bg-teal-500 w-4 h-4" id="product_status_dot"></div>
                                </div>

                                <select name="product_status" id="product_status"
                                    class="w-full rounded-lg border border-gray-200 p-4 pe-12 text-sm shadow-sm">
                                    <option value="">Please select</option>
                                    <option value="published">Published</option>
                                    <option value="draft">Draft</option>
                                    <option value="scheduled">Scheduled</option>
                                    <option value="inactive">Inactive</option>

                                </select>
                            </div>
                            <div class="border rounded-lg p-5 mt-5">
                                <div class="relative">
                                    <label for="UserEmail" class="block text-m mt-4 font-medium text-gray-700"> Product
                                        Quantity
                                        <sup class="text-red-600">*</sup>
                                    </label>
                                    <input type="number" name="product_qty" id="product_qty"
                                        class="w-full rounded-lg border border-gray-200 p-4 pe-12 text-sm shadow-sm"
                                        placeholder="QTY" required />
                                    <span class="text-xs ml-5 line-clamp-3  text-gray-400">Number must be greter than
                                        0.</span>
                                </div>
                            </div>
                        </div>

                    </div>

                    <div class=" border rounded-lg  lg:col-span-3">
                        <div class="m-5">
                            <header>
                                <h2 class="text-xl">Pricing</h2>
                            </header>
                            <div class="relative">
                                <label for="UserEmail" class="block text-m mt-4 font-medium text-gray-700"> Product
                                    Price
                                    <sup class="text-red-600">*</sup>
                                </label>
                                <input type="number"
                                    class="w-full rounded-lg border border-gray-200 p-4 pe-12 text-sm shadow-sm"
                                    placeholder="Product price" id="product_price" name="product_price" required />
                                <span class="text-xs ml-5 text-gray-400">Set the product price.</span>
                            </div>
                            <div>
                                <label for="" class="block text-m mt-4 font-medium text-gray-700">Discount Type</label>
                                <div class="grid lg:grid-cols-3 gap-4">
                                    <div>
                                        <div>
                                            <label for="product_discount"
                                                class="flex cursor-pointer justify-between gap-4 rounded-lg border border-gray-100 bg-white p-4 text-sm font-medium shadow-sm hover:border-gray-200 has-[:checked]:border-blue-500 has-[:checked]:ring-1 has-[:checked]:ring-blue-500">
                                                <div>
                                                    <p class="text-gray-700">No Discount</p>
                                                    <p class="mt-1 text-gray-900">on MRP</p>
                                                    <div class="flex items-center justify-center">
                                                    </div>
                                                </div>

                                                <input type="radio" name="product_discount" value='0'
                                                    id="product_discount"
                                                    class="size-5 border-gray-300 text-blue-500" />
                                            </label>
                                        </div>
                                    </div>
                                    <div>
                                        <div>
                                            <label for="product_discount_percentage"
                                                class="flex cursor-pointer justify-between gap-4 rounded-lg border border-gray-100 bg-white p-4 text-sm font-medium shadow-sm hover:border-gray-200 has-[:checked]:border-blue-500 has-[:checked]:ring-1 has-[:checked]:ring-blue-500">
                                                <div>
                                                    <p class="text-gray-700">Percentage</p>
                                                    <p class="mt-1 text-gray-900">20% default</p>

                                                </div>

                                                <input type="radio" name="product_discount" value='20%'
                                                    id="product_discount_percentage"
                                                    class="size-5 border-gray-300 text-blue-500" />
                                            </label>
                                        </div>
                                    </div>
                                    <div>
                                        <div>
                                            <label for="product_discount_fixed"
                                                class="flex cursor-pointer justify-between gap-4 rounded-lg border border-gray-100 bg-white p-4 text-sm font-medium shadow-sm hover:border-gray-200 has-[:checked]:border-blue-500 has-[:checked]:ring-1 has-[:checked]:ring-blue-500">
                                                <div>
                                                    <p class="text-gray-700">Fixed Price</p>

                                                    <p class="mt-1 text-gray-900">On MRP</p>
                                                </div>

                                                <input type="radio" name="product_discount" value='fixed_price'
                                                    id="product_discount_fixed"
                                                    class="size-5 border-gray-300 text-blue-500" />
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="grid lg:grid-cols-2 gap-4">
                                <div class="relative">
                                    <label for="UserEmail" class="block text-m mt-4 font-medium text-gray-700"> Tax
                                        Class
                                        <sup class="text-red-600">*</sup>
                                    </label>
                                    <select name="product_tax_class" id="product_tax_class"
                                        class="w-full rounded-lg border border-gray-200 p-4 pe-12 text-sm shadow-sm">
                                        <option value="">Please select</option>
                                        <option value="tax-free">Tax Free</option>
                                        <option value="taxable-goods">Taxable Goods</option>
                                    </select>

                                    <span class="text-xs ml-5 text-gray-400">Set the product tax class.</span>
                                </div>
                                <div class="relative">
                                    <label for="tax_amount" class="block text-m mt-4 font-medium text-gray-700">GST
                                        Amount (%)
                                        <sup class="text-red-600">*</sup>
                                    </label>
                                    <input name="product_tax_amount" id="product_tax_amount"
                                        class="w-full rounded-lg border border-gray-200 p-4 pe-12 text-sm shadow-sm">

                                    </input>

                                    <span class="text-xs ml-5 text-gray-400">Set the product GST about.
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="flex items-center justify-end m-5 gap-4">
                    <button class="px-4 py-2 bg-gray-400 text-white rounded-md" onclick="window.location.href = './admin.products.html'" type="reset">Cancel</button>
                    <button class="px-4 py-2 bg-teal-600 text-white rounded-md" type="submit">Add Product</button>
                </div>
            </form>
        </div>
    </main>
    <script>
       let counter = 1; 

function addMore() {
    const container = document.getElementById("custom_more");
    const div = document.createElement("div");
    div.innerHTML = `
      <div class="mt-4 flex items-center justify-center gap-4">
        <div>
          <label for="custom_product_qty_${counter}">Product Quantity</label>
          <input type="number" id="custom_product_qty_${counter}" name="custom_product_qty_${counter}"
              class="w-full rounded-lg border border-gray-200 p-4 pe-12 text-sm shadow-sm"
              placeholder="Enter quantity" />
        </div>
        <div>
          <label for="custom_product_price_${counter}">Product Price</label>
          <input type="number" id="custom_product_price_${counter}" name="custom_product_price_${counter}"
              class="w-full rounded-lg border border-gray-200 p-4 pe-12 text-sm shadow-sm"
              placeholder="Enter price" />
        </div>
      </div>
    `;
    
    // Append the new div to the container
    container.appendChild(div);
    
    // Increment the counter for the next set of fields
    counter++;
}


        const productMediaInput = document.getElementById('product_media');
        const imageDisplay2 = document.getElementById('product_media_display');

        productMediaInput.addEventListener('change', function (event) {
            const files = event.target.files; // Get all selected files

            // Check if more than 5 files are selected
            if (files.length > 5) {
                alert('You can only select up to 5 images.');
                productMediaInput.value = ''; // Clear the input
                imageDisplay2.innerHTML = ''; // Clear previous images
                return;
            }

            imageDisplay2.innerHTML = ''; // Clear previous images

            Array.from(files).forEach(file => {
                const reader = new FileReader();
                reader.onload = function (e) {
                    const img = document.createElement('img');
                    img.src = e.target.result;
                    img.style.maxWidth = '100px'; // Set the max width for each image
                    img.style.margin = '5px'; // Add some margin
                    imageDisplay2.appendChild(img); // Add the image to the display
                }
                reader.readAsDataURL(file);
            });
        });
    </script>


    <script>
        const imageInput = document.getElementById('imageInput');
        const imageDisplay = document.getElementById('imageDisplay');

        imageInput.addEventListener('change', function (event) {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function (e) {
                    imageDisplay.src = e.target.result;
                }
                reader.readAsDataURL(file);
            }
        });
    </script>
    <script>
        async function checkAuth() {
            const token = localStorage.getItem("token");

            if (!token) {
                window.location.href = "admin/index.html";
                return;
            }

            try {
                const response = await fetch(
                    "http://localhost:3000/admin/dashboard",
                    {
                        method: "GET",
                        headers: {
                            Authorization: `Bearer ${token}`,
                        },
                    }
                );

                if (response.status === 401 || response.status === 403) {
                    window.location.href = "/index.html";
                } else if (!response.ok) {
                    console.error("Error:", await response.text());
                    window.location.href = "/index.html";
                } else {
                    const data = await response.json();
                    document.getElementById("user").textContent = data.message; // Display the username in the welcome message
                }
            } catch (error) {
                console.error("Error:", error);
                window.location.href = "/index.html";
            }
        }
        checkAuth();
        document
            .getElementById("logoutButton")
            .addEventListener("click", async () => {

                const token = localStorage.getItem("token");

                if (!token) {
                    alert("You are not logged in");
                    return;
                }

                try {
                    const response = await fetch("http://localhost:3000/admin/logout", {
                        method: "POST",
                        headers: {
                            Authorization: `Bearer ${token}`,
                        },
                    });

                    if (response.ok) {
                        localStorage.removeItem("token");
                        window.location.href = "/admin";
                    } else {
                        alert("Logout failed");
                    }
                } catch (error) {
                    console.error("Error:", error);
                    alert("An error occurred during logout");
                }
            });
    </script>
    <!-- <script>
        document.getElementById("add-product").addEventListener("submit", async function (event) {
            event.preventDefault();
            const formData = new FormData(event.target);
            const token = localStorage.getItem("token");
            const formObj = {}
            formData.forEach((value, key) => {
                formObj[key] = value;
            });
            console.log(formObj);


            try {
                const response = await fetch('http://localhost:3000/admin/add-product', {
                    method: 'POST',
                    body: formData,
                    headers: {
                        'Authorization': `Bearer ${token}`,
                    },
                })
                if (response.ok) {
                    alert("Product added successfully");
                    window.location.href = "/admin/admin.products.html";

                }
                else {
                    alert("Error adding product");
                    console.log("Error:", await response.text());
                }
            }
            catch (error) {
                console.error("Error:", error);
                alert("An error occurred while adding product");
            }


        });

    </script> -->


    <script>
        document.getElementById("add-product").addEventListener("submit", async function (event) {
            event.preventDefault();
            const formData = new FormData(event.target);
            const token = localStorage.getItem("token");
    

            const products = [];
            const totalFields = document.querySelectorAll("[id^='custom_product_qty_']").length;
    
            for (let i = 1; i <= totalFields; i++) {
                const quantity = document.getElementById(`custom_product_qty_${i}`).value;
                const price = document.getElementById(`custom_product_price_${i}`).value;
    
                // Add to products array as an object
                if (quantity && price) {
                    products.push({
                        quantity: quantity,
                        price: price
                    });
                }
            }
    

            formData.append("products", JSON.stringify(products));
            console.log(formData);
            
    
            try {
                const response = await fetch('http://localhost:3000/admin/add-product', {
                    method: 'POST',
                    body: formData,
                    headers: {
                        'Authorization': `Bearer ${token}`,
                    },
                });
    
                if (response.ok) {
                    alert("Product added successfully");
                    window.location.href = "/admin/admin.products.html";
                } else {
                    alert("Error adding product");
                    console.log("Error:", await response.text());
                }
            } catch (error) {
                console.error("Error:", error);
                alert("An error occurred while adding product");
            }
     
        });
    </script>
    

</body>

</html>