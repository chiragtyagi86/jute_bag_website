<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Admin -Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style></style>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
      async function checkAdminAccess() {
        const token = localStorage.getItem("token");

        if (!token) {
          window.location.href = "/index.html";
          return;
        }

        try {
          const response = await fetch(
            "http://localhost:3000/admin/dashboard",
            {
              method: "GET",
              headers: {
                Authorization: `Bearer ${token}`,
              },
            }
          );

          if (response.status === 403) {
            alert("Access denied. You do not have the required permissions.");
            window.location.href = "/login.html";
          } else if (!response.ok) {
            alert("Error accessing admin dashboard");
          } else {
            const data = await response.json();
            console.log("Admin dashboard data:", data);
          }
        } catch (error) {
          console.error("Error:", error);
        }
      }
    </script>
  </head>

  <body>
    <main class="flex">
      <div
        class="flex h-screen w-16 flex-col justify-between border-e bg-white"
      >
        <div>
          <div class="p-4 inline-flex size-16 items-center justify-center">
            <img src="../assets/Anumala logo 5mb.png" width="180" alt="" />
          </div>

          <div class="border-t border-gray-100">
            <div class="px-2">
              <div class="py-4">
                <a
                  href="#"
                  class="t group relative flex justify-center rounded bg-teal-50 px-2 py-1.5 text-teal-700"
                >
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    class="size-5 opacity-75"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke="currentColor"
                    stroke-width="2"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"
                    />
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"
                    />
                  </svg>

                  <span
                    class="invisible absolute start-full top-1/2 ms-4 -translate-y-1/2 rounded bg-gray-900 px-2 py-1.5 text-xs font-medium text-white group-hover:visible"
                  >
                    General
                  </span>
                </a>
              </div>

              <ul class="space-y-1 border-t border-gray-100 pt-4">
                <li>
                  <a
                    href="/admin/admin.doctor.html"
                    class="group relative flex justify-center rounded px-2 py-1.5 text-gray-500 hover:bg-gray-50 hover:text-gray-700"
                  >
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      class="size-5 opacity-75"
                      fill="none"
                      viewBox="0 0 24 24"
                      stroke="currentColor"
                      stroke-width="2"
                    >
                      <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"
                      />
                    </svg>

                    <span
                      class="invisible absolute start-full top-1/2 ms-4 -translate-y-1/2 rounded bg-gray-900 px-2 py-1.5 text-xs font-medium text-white group-hover:visible"
                    >
                      Doctors
                    </span>
                  </a>
                </li>

                <li>
                  <a
                    href="#"
                    class="group relative flex justify-center rounded px-2 py-1.5 text-gray-500 hover:bg-gray-50 hover:text-gray-700"
                  >
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      class="size-5 opacity-75"
                      fill="none"
                      viewBox="0 0 24 24"
                      stroke="currentColor"
                      stroke-width="2"
                    >
                      <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"
                      />
                    </svg>

                    <span
                      class="invisible absolute start-full top-1/2 ms-4 -translate-y-1/2 rounded bg-gray-900 px-2 py-1.5 text-xs font-medium text-white group-hover:visible"
                    >
                      Billing
                    </span>
                  </a>
                </li>

                <li>
                  <a
                    href="#"
                    class="group relative flex justify-center rounded px-2 py-1.5 text-gray-500 hover:bg-gray-50 hover:text-gray-700"
                  >
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      class="size-5 opacity-75"
                      fill="none"
                      viewBox="0 0 24 24"
                      stroke="currentColor"
                      stroke-width="2"
                    >
                      <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        d="M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"
                      />
                    </svg>

                    <span
                      class="invisible absolute start-full top-1/2 ms-4 -translate-y-1/2 rounded bg-gray-900 px-2 py-1.5 text-xs font-medium text-white group-hover:visible"
                    >
                      Invoices
                    </span>
                  </a>
                </li>

                <li>
                  <a
                    href="#"
                    class="group relative flex justify-center rounded px-2 py-1.5 text-gray-500 hover:bg-gray-50 hover:text-gray-700"
                  >
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      class="size-5 opacity-75"
                      fill="none"
                      viewBox="0 0 24 24"
                      stroke="currentColor"
                      stroke-width="2"
                    >
                      <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"
                      />
                    </svg>

                    <span
                      class="invisible absolute start-full top-1/2 ms-4 -translate-y-1/2 rounded bg-gray-900 px-2 py-1.5 text-xs font-medium text-white group-hover:visible"
                    >
                      Account
                    </span>
                  </a>
                </li>
              </ul>
            </div>
          </div>
        </div>

        <div
          class="sticky inset-x-0 bottom-0 border-t border-gray-100 bg-white p-2"
        >
          <form>
            <button
              id="logoutButton"
              type="submit"
              class="group relative flex w-full justify-center rounded-lg px-2 py-1.5 text-sm text-gray-500 hover:bg-gray-50 hover:text-gray-700"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                class="size-5 opacity-75"
                fill="none"
                viewBox="0 0 24 24"
                stroke="currentColor"
                stroke-width="2"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"
                />
              </svg>

              <span
                class="invisible absolute start-full top-1/2 ms-4 -translate-y-1/2 rounded bg-gray-900 px-2 py-1.5 text-xs font-medium text-white group-hover:visible"
              >
                Logout
              </span>
            </button>
          </form>
        </div>
      </div>
      <div class="w-full">
        <div
          class="bg-teal-600 px-4 py-3 text-white sm:flex sm:items-center sm:justify-between sm:px-6 lg:px-8"
        >
          <p class="text-center font-medium sm:text-left">
            Welcome to your dashboard! <span class="underline" id="user"></span>
          </p>

          <a
            class="mt-4 block rounded-lg bg-white px-5 py-3 text-center text-sm font-medium text-teal-600 transition hover:bg-white/90 focus:outline-none focus:ring active:text-teal-500 sm:mt-0"
            href="#"
          >
            Learn More
          </a>
        </div>
        <div class="grid grid-cols-1 m-5 gap-4 lg:grid-cols-4 lg:gap-8">
          <div class="rounded-lg">
            <article
              class="rounded-lg mb-5 border border-gray-100 bg-white p-6"
            >
              <div class="flex items-center justify-between">
                <div>
                  <p class="text-sm text-gray-500">Profit</p>

                  <p class="text-2xl font-medium text-gray-900">$240.94</p>
                </div>

                <span class="rounded-full bg-blue-100 p-3 text-blue-600">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    class="size-8"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke="currentColor"
                    stroke-width="2"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      d="M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"
                    />
                  </svg>
                </span>
              </div>

              <div class="mt-1 flex gap-1 text-green-600">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  class="size-4"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke="currentColor"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"
                  />
                </svg>

                <p class="flex gap-2 text-xs">
                  <span class="font-medium"> 67.81% </span>

                  <span class="text-gray-500"> Since last week </span>
                </p>
              </div>
            </article>

            <article class="rounded-lg border border-gray-100 bg-white p-6">
              <div class="flex items-center justify-between">
                <div>
                  <p class="text-sm text-gray-500">Profit</p>

                  <p class="text-2xl font-medium text-gray-900">$240.94</p>
                </div>

                <span class="rounded-full bg-blue-100 p-3 text-blue-600">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    class="size-8"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke="currentColor"
                    stroke-width="2"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      d="M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"
                    />
                  </svg>
                </span>
              </div>

              <div class="mt-1 flex gap-1 text-red-600">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  class="size-4"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke="currentColor"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M13 17h8m0 0V9m0 8l-8-8-4 4-6-6"
                  />
                </svg>

                <p class="flex gap-2 text-xs">
                  <span class="font-medium"> 67.81% </span>

                  <span class="text-gray-500"> Since last week </span>
                </p>
              </div>
            </article>
          </div>
          <div class="rounded-lg">
            <article
              class="rounded-lg mb-5 border border-gray-100 bg-white p-6"
            >
              <div class="flex items-center justify-between">
                <div>
                  <p class="text-sm text-gray-500">Profit</p>

                  <p class="text-2xl font-medium text-gray-900">$240.94</p>
                </div>

                <span class="rounded-full bg-blue-100 p-3 text-blue-600">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    class="size-8"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke="currentColor"
                    stroke-width="2"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      d="M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"
                    />
                  </svg>
                </span>
              </div>

              <div class="mt-1 flex gap-1 text-green-600">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  class="size-4"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke="currentColor"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"
                  />
                </svg>

                <p class="flex gap-2 text-xs">
                  <span class="font-medium"> 67.81% </span>

                  <span class="text-gray-500"> Since last week </span>
                </p>
              </div>
            </article>

            <article class="rounded-lg border border-gray-100 bg-white p-6">
              <div class="flex items-center justify-between">
                <div>
                  <p class="text-sm text-gray-500">Profit</p>

                  <p class="text-2xl font-medium text-gray-900">$240.94</p>
                </div>

                <span class="rounded-full bg-blue-100 p-3 text-blue-600">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    class="size-8"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke="currentColor"
                    stroke-width="2"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      d="M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"
                    />
                  </svg>
                </span>
              </div>

              <div class="mt-1 flex gap-1 text-red-600">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  class="size-4"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke="currentColor"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M13 17h8m0 0V9m0 8l-8-8-4 4-6-6"
                  />
                </svg>

                <p class="flex gap-2 text-xs">
                  <span class="font-medium"> 67.81% </span>

                  <span class="text-gray-500"> Since last week </span>
                </p>
              </div>
            </article>
          </div>
          <div class="rounded-lg border lg:col-span-2">
            <canvas class="p-2 w-full h-full" id="myChart"></canvas>
          </div>
        </div>
        <div class="grid grid-cols-1 m-5 gap-4 lg:grid-cols-4 lg:gap-8">
          <div class="h-96 rounded-lg border lg:col-span-2">
            <h2>Recent Orders:</h2>
            <div class="flex items-center justify-evenly type">
              <div class="border p-2 rounded-md">
                <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQxwKA4S-B3w6MYI2V1o1EZyKKmEaSeaeHEdg&s" width="60" alt="">
              </div>
              <div class="border p-2 rounded-md">
                <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQxwKA4S-B3w6MYI2V1o1EZyKKmEaSeaeHEdg&s" width="60" alt="">
              </div>
              <div class="border p-2 rounded-md">
                <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQxwKA4S-B3w6MYI2V1o1EZyKKmEaSeaeHEdg&s" width="60" alt="">
              </div>
              <div class="border p-2 rounded-md">
                <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQxwKA4S-B3w6MYI2V1o1EZyKKmEaSeaeHEdg&s" width="60" alt="">
              </div>
            </div>
            
            <div class="disp_order" >
              <section class="h-64 overflow-scroll ">
                <div
                  class="mx-auto max-w-screen-xl px-4 py-8 sm:px-6 sm:py-12 lg:px-8"
                >
                  <div class="mx-auto max-w-3xl">
                    <header class="text-center">
                      <h1 class="text-xl font-bold text-gray-900 sm:text-3xl">
                        Your Cart
                      </h1>
                    </header>

                    <div class="mt-8">
                      <ul class="space-y-4">
                        <li class="flex items-center gap-4">
                          <img
                            src="https://images.unsplash.com/photo-1618354691373-d851c5c3a990?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=830&q=80"
                            alt=""
                            class="size-16 rounded object-cover"
                          />

                          <div>
                            <h3 class="text-sm text-gray-900">
                              Basic Tee 6-Pack
                            </h3>

                            <dl
                              class="mt-0.5 space-y-px text-[10px] text-gray-600"
                            >
                              <div>
                                <dt class="inline">Size:</dt>
                                <dd class="inline">XXS</dd>
                              </div>

                              <div>
                                <dt class="inline">Color:</dt>
                                <dd class="inline">White</dd>
                              </div>
                            </dl>
                          </div>

                          <div
                            class="flex flex-1 items-center justify-end gap-2"
                          >
                            <form>
                              <label for="Line1Qty" class="sr-only">
                                Quantity
                              </label>

                              <input
                                type="number"
                                min="1"
                                value="1"
                                id="Line1Qty"
                                class="h-8 w-12 rounded border-gray-200 bg-gray-50 p-0 text-center text-xs text-gray-600 [-moz-appearance:_textfield] focus:outline-none [&::-webkit-inner-spin-button]:m-0 [&::-webkit-inner-spin-button]:appearance-none [&::-webkit-outer-spin-button]:m-0 [&::-webkit-outer-spin-button]:appearance-none"
                              />
                            </form>

                            <button
                              class="text-gray-600 transition hover:text-red-600"
                            >
                              <span class="sr-only">Remove item</span>

                              <svg
                                xmlns="http://www.w3.org/2000/svg"
                                fill="none"
                                viewBox="0 0 24 24"
                                stroke-width="1.5"
                                stroke="currentColor"
                                class="size-4"
                              >
                                <path
                                  stroke-linecap="round"
                                  stroke-linejoin="round"
                                  d="M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"
                                />
                              </svg>
                            </button>
                          </div>
                        </li>

                        <li class="flex items-center gap-4">
                          <img
                            src="https://images.unsplash.com/photo-1618354691373-d851c5c3a990?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=830&q=80"
                            alt=""
                            class="size-16 rounded object-cover"
                          />

                          <div>
                            <h3 class="text-sm text-gray-900">
                              Basic Tee 6-Pack
                            </h3>

                            <dl
                              class="mt-0.5 space-y-px text-[10px] text-gray-600"
                            >
                              <div>
                                <dt class="inline">Size:</dt>
                                <dd class="inline">XXS</dd>
                              </div>

                              <div>
                                <dt class="inline">Color:</dt>
                                <dd class="inline">White</dd>
                              </div>
                            </dl>
                          </div>

                          <div
                            class="flex flex-1 items-center justify-end gap-2"
                          >
                            <form>
                              <label for="Line2Qty" class="sr-only">
                                Quantity
                              </label>

                              <input
                                type="number"
                                min="1"
                                value="1"
                                id="Line2Qty"
                                class="h-8 w-12 rounded border-gray-200 bg-gray-50 p-0 text-center text-xs text-gray-600 [-moz-appearance:_textfield] focus:outline-none [&::-webkit-inner-spin-button]:m-0 [&::-webkit-inner-spin-button]:appearance-none [&::-webkit-outer-spin-button]:m-0 [&::-webkit-outer-spin-button]:appearance-none"
                              />
                            </form>

                            <button
                              class="text-gray-600 transition hover:text-red-600"
                            >
                              <span class="sr-only">Remove item</span>

                              <svg
                                xmlns="http://www.w3.org/2000/svg"
                                fill="none"
                                viewBox="0 0 24 24"
                                stroke-width="1.5"
                                stroke="currentColor"
                                class="size-4"
                              >
                                <path
                                  stroke-linecap="round"
                                  stroke-linejoin="round"
                                  d="M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"
                                />
                              </svg>
                            </button>
                          </div>
                        </li>

                        <li class="flex items-center gap-4">
                          <img
                            src="https://images.unsplash.com/photo-1618354691373-d851c5c3a990?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=830&q=80"
                            alt=""
                            class="size-16 rounded object-cover"
                          />

                          <div>
                            <h3 class="text-sm text-gray-900">
                              Basic Tee 6-Pack
                            </h3>

                            <dl
                              class="mt-0.5 space-y-px text-[10px] text-gray-600"
                            >
                              <div>
                                <dt class="inline">Size:</dt>
                                <dd class="inline">XXS</dd>
                              </div>

                              <div>
                                <dt class="inline">Color:</dt>
                                <dd class="inline">White</dd>
                              </div>
                            </dl>
                          </div>

                          <div
                            class="flex flex-1 items-center justify-end gap-2"
                          >
                            <form>
                              <label for="Line3Qty" class="sr-only">
                                Quantity
                              </label>

                              <input
                                type="number"
                                min="1"
                                value="1"
                                id="Line3Qty"
                                class="h-8 w-12 rounded border-gray-200 bg-gray-50 p-0 text-center text-xs text-gray-600 [-moz-appearance:_textfield] focus:outline-none [&::-webkit-inner-spin-button]:m-0 [&::-webkit-inner-spin-button]:appearance-none [&::-webkit-outer-spin-button]:m-0 [&::-webkit-outer-spin-button]:appearance-none"
                              />
                            </form>

                            <button
                              class="text-gray-600 transition hover:text-red-600"
                            >
                              <span class="sr-only">Remove item</span>

                              <svg
                                xmlns="http://www.w3.org/2000/svg"
                                fill="none"
                                viewBox="0 0 24 24"
                                stroke-width="1.5"
                                stroke="currentColor"
                                class="size-4"
                              >
                                <path
                                  stroke-linecap="round"
                                  stroke-linejoin="round"
                                  d="M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"
                                />
                              </svg>
                            </button>
                          </div>
                        </li>
                      </ul>

                      <div
                        class="mt-8 flex justify-end border-t border-gray-100 pt-8"
                      >
                        <div class="w-screen max-w-lg space-y-4">
                          <dl class="space-y-0.5 text-sm text-gray-700">
                            <div class="flex justify-between">
                              <dt>Subtotal</dt>
                              <dd>£250</dd>
                            </div>

                            <div class="flex justify-between">
                              <dt>VAT</dt>
                              <dd>£25</dd>
                            </div>

                            <div class="flex justify-between">
                              <dt>Discount</dt>
                              <dd>-£20</dd>
                            </div>

                            <div
                              class="flex justify-between !text-base font-medium"
                            >
                              <dt>Total</dt>
                              <dd>£200</dd>
                            </div>
                          </dl>

                          <div class="flex justify-end">
                            <span
                              class="inline-flex items-center justify-center rounded-full bg-indigo-100 px-2.5 py-0.5 text-indigo-700"
                            >
                              <svg
                                xmlns="http://www.w3.org/2000/svg"
                                fill="none"
                                viewBox="0 0 24 24"
                                stroke-width="1.5"
                                stroke="currentColor"
                                class="-ms-1 me-1.5 size-4"
                              >
                                <path
                                  stroke-linecap="round"
                                  stroke-linejoin="round"
                                  d="M16.5 6v.75m0 3v.75m0 3v.75m0 3V18m-9-5.25h5.25M7.5 15h3M3.375 5.25c-.621 0-1.125.504-1.125 1.125v3.026a2.999 2.999 0 010 5.198v3.026c0 .621.504 1.125 1.125 1.125h17.25c.621 0 1.125-.504 1.125-1.125v-3.026a2.999 2.999 0 010-5.198V6.375c0-.621-.504-1.125-1.125-1.125H3.375z"
                                />
                              </svg>

                              <p class="whitespace-nowrap text-xs">
                                2 Discounts Applied
                              </p>
                            </span>
                          </div>

                          <div class="flex justify-end">
                            <a
                              href="#"
                              class="block rounded bg-gray-700 px-5 py-3 text-sm text-gray-100 transition hover:bg-gray-600"
                            >
                              Checkout
                            </a>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </section>
            </div>
          </div>
          <div class="rounded-lg border lg:col-span-2">
            <canvas class="p-2 w-full h-full" id="myChart2"></canvas>
          </div>
        </div>
        <div class="grid grid-cols-1 m-5 gap-4 lg:grid-cols-3 lg:gap-8">
          <div class="h-32 rounded-lg bg-gray-200"></div>
          <div class="h-32 rounded-lg bg-gray-200 lg:col-span-2"></div>
        </div>
        <div class="grid grid-cols-1 m-5 gap-4 lg:grid-cols-3 lg:gap-8">
          <div class="h-32 rounded-lg bg-gray-200"></div>
          <div class="h-32 rounded-lg bg-gray-200 lg:col-span-2"></div>
        </div>
      </div>
    </main>
    <script>
      async function checkAuth() {
        const token = localStorage.getItem("token");

        if (!token) {
          window.location.href = "admin/index.html";
          return;
        }

        try {
          const response = await fetch(
            "http://localhost:3000/admin/dashboard",
            {
              method: "GET",
              headers: {
                Authorization: `Bearer ${token}`,
              },
            }
          );

          if (response.status === 401 || response.status === 403) {
            window.location.href = "/index.html";
          } else if (!response.ok) {
            console.error("Error:", await response.text());
            window.location.href = "/index.html";
          } else {
            const data = await response.json();
            document.getElementById("user").textContent = data.message; // Display the username in the welcome message
          }
        } catch (error) {
          console.error("Error:", error);
          window.location.href = "/index.html";
        }
      }
      checkAuth();
      document
        .getElementById("logoutButton")
        .addEventListener("click", async () => {
          // Check if a token is present in local storage
          const token = localStorage.getItem("token");

          if (!token) {
            alert("You are not logged in");
            return;
          }

          try {
            const response = await fetch("http://localhost:3000/admin/logout", {
              method: "POST",
              headers: {
                Authorization: `Bearer ${token}`,
              },
            });

            if (response.ok) {
              localStorage.removeItem("token");
              window.location.href = "/admin";
            } else {
              alert("Logout failed");
            }
          } catch (error) {
            console.error("Error:", error);
            alert("An error occurred during logout");
          }
        });

      // async function fetchData() {
      //     const token = localStorage.getItem("token");
      //     const tableBody = document
      //         .getElementById("customerTable")
      //         .getElementsByTagName("tbody")[0];

      //     try {
      //         const response = await fetch("http://localhost:3000/admin/data", {
      //             method: "GET",
      //             headers: {
      //                 Authorization: `Bearer ${token}`,
      //             },
      //         });

      //         if (response.ok) {
      //             const data = await response.json();
      //             const customerTableBody = document.querySelector('#customerTable tbody');
      //             data.user.forEach(customer => {
      //                 const row = document.createElement('tr');
      //                 row.innerHTML = `
      //                 <td class="text-gray-700 p-3">${customer.id}</td>
      //                 <td class="text-gray-700 p-3">${customer.first_name} ${customer.last_name} </td>

      //                 <td class="text-gray-700 p-3">${customer.email}</td>
      //                 <td class="text-gray-700 p-3">${customer.username}</td>

      //             `;
      //                 customerTableBody.appendChild(row);
      //             });

      //             const contactTableBody = document.querySelector('#contactTable tbody');
      //             data.user_form.forEach(contact => {
      //                 const row = document.createElement('tr');
      //                 row.innerHTML = `
      //                 <td class="text-gray-700 p-3">${contact.id}</td>
      //                 <td class="text-gray-700 p-3">${contact.first_name} ${contact.last_name}</td>

      //                 <td class="text-gray-700 p-3">${contact.email}</td>
      //                 <td class="text-gray-700 p-3">${contact.message}</td>
      //             `;
      //                 contactTableBody.appendChild(row);
      //             });

      //             document.getElementById("totalUser").innerHTML = data.user.length;
      //             document.getElementById("totalCon").innerHTML = data.user_form.length;

      //         } else {
      //             console.error("Failed to fetch data:", response.statusText);
      //             window.location.href = '/admin';
      //         }
      //     } catch (error) {
      //         console.log("Fetch error:", error);
      //         window.location.href = '/admin';
      //     }
      // }
      // fetchData();
    </script>
    <script>
      const ctx = document.getElementById("myChart").getContext("2d");
      const myChart = new Chart(ctx, {
        type: "line", // Specify the type of chart
        data: {
          labels: ["Red", "Blue", "Yellow", "Green", "Purple", "Orange"], // X-axis labels
          datasets: [
            {
              label: "# of Votes", // The label for the dataset
              data: [12, 19, 3, 5, 2, 3], // Data points for each label
              backgroundColor: [
                // Background colors for the bars
                "rgba(255, 99, 132, 0.2)",
                "rgba(54, 162, 235, 0.2)",
                "rgba(255, 206, 86, 0.2)",
                "rgba(75, 192, 192, 0.2)",
                "rgba(153, 102, 255, 0.2)",
                "rgba(255, 159, 64, 0.2)",
              ],
              borderColor: [
                // Border colors for the bars
                "rgba(255, 99, 132, 1)",
                "rgba(54, 162, 235, 1)",
                "rgba(255, 206, 86, 1)",
                "rgba(75, 192, 192, 1)",
                "rgba(153, 102, 255, 1)",
                "rgba(255, 159, 64, 1)",
              ],
              borderWidth: 1, // Width of the border
            },
          ],
        },
        options: {
          scales: {
            y: {
              beginAtZero: true, // Start the Y-axis at zero
            },
          },
        },
      });
    </script>
    <script>
      const ctx2 = document.getElementById("myChart2").getContext("2d");
      const myChart2 = new Chart(ctx2, {
        type: "bar", // Specify the type of chart
        data: {
          labels: ["Red", "Blue", "Yellow", "Green", "Purple", "Orange"], // X-axis labels
          datasets: [
            {
              label: "# of Votes", // The label for the dataset
              data: [12, 19, 3, 5, 2, 3], // Data points for each label
              backgroundColor: [
                // Background colors for the bars
                "rgba(255, 99, 132, 0.2)",
                "rgba(54, 162, 235, 0.2)",
                "rgba(255, 206, 86, 0.2)",
                "rgba(75, 192, 192, 0.2)",
                "rgba(153, 102, 255, 0.2)",
                "rgba(255, 159, 64, 0.2)",
              ],
              borderColor: [
                // Border colors for the bars
                "rgba(255, 99, 132, 1)",
                "rgba(54, 162, 235, 1)",
                "rgba(255, 206, 86, 1)",
                "rgba(75, 192, 192, 1)",
                "rgba(153, 102, 255, 1)",
                "rgba(255, 159, 64, 1)",
              ],
              borderWidth: 2, // Width of the border
            },
          ],
        },
        options: {
          scales: {
            y: {
              beginAtZero: true, // Start the Y-axis at zero
            },
          },
        },
      });
    </script>
  </body>
</html>
